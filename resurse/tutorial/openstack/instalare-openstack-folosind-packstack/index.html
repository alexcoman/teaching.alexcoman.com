<!DOCTYPE html> <!--[if IE 8]> <html lang="ro" class="ie8"> <![endif]--> <!--[if IE 9]> <html lang="ro" class="ie9"> <![endif]--> <!--[if !IE]><!--> <html lang="ro"> <!--<![endif]--> <head> <title>Instalare Openstack(RDO) folosind Packstack</title> <!-- Meta --> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" lang="ro" xml:lang="ro" content="Situl dedicat laboratoarelor susținute în cadrul Facultății de Informatică din Iași." /> <meta name="keywords" lang="en" xml:lang="en" content="Web, WWW, technology, course, Romania, Iasi, Computer Science, university, academic, information, education, school, project, lang programming, document, software, application, student, grade" /> <meta name="keywords" lang="ro" xml:lang="ro" content="Web, WWW, technologie, curs, Romania, Iasi, Informatica, universitate, academic, informatie, educatie, scoala, proiect, limbaj, programare, document, software, aplicatie, student, nota" /> <link rel="shortcut icon" href="/assets/images/favicon.ico"> <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'> <!-- Global CSS --> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> <!-- Plugins CSS --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css"> <!-- Theme CSS --> <link id="theme-style" rel="stylesheet" href="/assets/css/main.css"> <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --> <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script> <![endif]--> <link rel="canonical" href="https://teaching.alexcoman.com/resurse/tutorial/openstack/instalare-openstack-folosind-packstack/"> <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml"> <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" integrity="sha256-3YM6A3pH4QFCl9WbSU8oXF5N6W/2ylvW0o2g+Z6TmLQ=" crossorigin="anonymous" /> </head> <body > <div class="page-wrapper"> <header id="header" class="header "> <div class="container"> <div class="branding"> <h1 class="logo"> <a href="/resurse/tutorial/openstack/instalare-openstack-folosind-packstack/"> <span aria-hidden="true" class="icon fas fa-laptop"></span> <span class="text-highlight">Laboratoare</span> <span class="text">@FII</span> </a> </h1> </div> <ol class="breadcrumb"> <li><a href="/">Acasă</a></li> <li><a href="/resurse">Resurse</a></li> <li><a href="/resurse/tutorial">Tutorial</a></li> <li><a href="/resurse/tutorial/openstack">Openstack</a></li> <li class="active">Instalare Openstack(RDO) folosind Packstack</li> </ol> </div> </header> <section id="blog_post" class="blog-post-section doc-wrapper"> <div class="container"> <div id="doc-header" class="doc-header text-center"> <h1 class="doc-title" itemprop="name headline"> <i class="icon fas fa-paper-plane"></i> Instalare Openstack(RDO) folosind Packstack </h1> <div class="meta"> Publicat de: <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name">Matei-Marius Micu</span> </span> pe <i class="fas fa-clock"></i> <time datetime="2017-05-15T12:00:00+00:00" itemprop="datePublished"> 15 mai 2017 </time> </div> </div> <div class="doc-body"> <div class="doc-content"> <div class="content-inner"> <section id="dashboards" class="doc-section"> <div class="section-block"> <p>Acest tutorial vine în ajutorul studenților ce doresc să își pregătească o mașină virtuală care va contine un mediu de execuție OpensStack RDO(<a href="RDO">RedHat Deployment of OpenStack</a>)</p> <h2 id="resurse-necesare">Resurse necesare</h2> <p>Pentru pregătirea mașinei virtuale puteți urmari tutorialul despre <a href="/resurse/tutorial/virtualbox/2017/05/14/instalare-centos-7/">VirtualBox și Cent OS 7</a>. Două mențiune trebuie făcută:</p> <ul> <li>la pasul <strong>Specificații pentru mașina virtuală</strong> este indicat să aveți minim 6GB RAM.</li> <li>ISO-ul pe care il folosiți trebuie sa contină GUI(interfață grafică)</li> </ul> <p>Deoarece rețelele de tip <strong>NAT</strong> din <a href="https://www.virtualbox.org/">VirtualBox</a> sunt izolate(nu pot fi accesate din mașina gazdă) trebuie să facem port forwarding a portului 80 (cel pe care este expus <a href="https://wiki.openstack.org/wiki/Horizon">Horizon</a>, interfața web prin care se poate interacționa cu OpenStack). <strong>Atenție</strong> Acești pasi trebuie făcuți cat timp mașina este închisă!</p> <p>Pentru acest lucru accesăm <strong>Port Forwarding</strong> din meniul <strong>Settings</strong> &gt; <strong>Network</strong> și adăugam urmatoarele reguli: <img src="/assets/img/virtualbox/openstack/instalare-openstack-cu-packstack/0-port-forwarding.png" alt="Reguli de Port Forwarding" /></p> <h3 id="pasul-i-setarea-unui-ip-static">Pasul I. Setarea unui IP static</h3> <p>Deoarece <a href="http://www.openstack.org/">OpenStack</a> este compus din mai multe servicii (care pot rula pe masini diferite), fiecare serviciu se bazeaza pe cunoașterea IP-ului serviciilor cu care interacționeaza, dacă IP-ul s-ar schimba atunci nu s-ar mai putea realiza comunicarea corect.</p> <p>In CentOS pentru a seta un IP static putem modifica fișierul <code class="highlighter-rouge">/etc/sysconfig/network-scripts/ifcfg-enp0s3</code>(unde <code class="highlighter-rouge">enp0s3</code> este numele interfeței de tip <strong>NAT</strong>). In acest fișier trebuie adăugate urmatoarele opțiuni(pe langa cele existente):</p> <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BOOTPROTO<span class="p">=</span><span class="s2">"static"</span>

IPADDR<span class="p">=</span><span class="m">10</span><span class="p">.</span><span class="m">0</span><span class="p">.</span><span class="m">2</span><span class="p">.</span><span class="m">200</span> # IP<span class="p">-</span>ul este ales <span class="k">de</span> noi<span class="p">,</span> trebuie doar <span class="k">sa</span> faca parte din sub<span class="p">-</span>reț<span class="k">ea</span>
NETMASK<span class="p">=</span><span class="m">255</span><span class="p">.</span><span class="m">255</span><span class="p">.</span><span class="m">255</span><span class="p">.</span><span class="m">0</span> 
GATEWAY<span class="p">=</span><span class="m">10</span><span class="p">.</span><span class="m">0</span><span class="p">.</span><span class="m">2</span><span class="p">.</span><span class="m">1</span>
DNS1<span class="p">=</span><span class="m">8</span><span class="p">.</span><span class="m">8</span><span class="p">.</span><span class="m">8</span><span class="p">.</span><span class="m">8</span>
DNS1<span class="p">=</span><span class="m">8</span><span class="p">.</span><span class="m">8</span><span class="p">.</span><span class="m">4</span><span class="p">.</span><span class="m">4</span>
</code></pre></div></div> <p><img src="/assets/img/virtualbox/openstack/instalare-openstack-cu-packstack/1-ip-static.png" alt="Setarea unui IP static" /></p> <h3 id="pasul-ii-pregatirea-rețelei">Pasul II. Pregatirea rețelei</h3> <p><strong>Atenție</strong>: acest pas va scădea securitatea sistemului de operare, această mașina nu trebuie să fie accesibilă din exterior. Dezactivăm și oprim firewall-ul (pentru a nu avea probleme cu port-urile folosite de OpenStack)</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl disable firewalld
<span class="nv">$ </span><span class="nb">sudo </span>systemctl stop firewalld
</code></pre></div></div> <p>Dezactivăm și oprim NetworkManager (deoarece încă nu suportă bridging)</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl disable NetworkManager
<span class="nv">$ </span><span class="nb">sudo </span>systemctl stop NetworkManager
</code></pre></div></div> <p>Activăm și pornim serviciul vechi de networking</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl <span class="nb">enable </span>network
<span class="nv">$ </span><span class="nb">sudo </span>systemctl start network
</code></pre></div></div> <h3 id="pasul-iii-instalarea-pachetului-care-conține-utilitarul-de-instalare-și-a-utilitarului">Pasul III. Instalarea pachetului care conține utilitarul de instalare și a utilitarului</h3> <p>Instalăm pachetul care contine utilitarul</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> centos-release-openstack-ocata
<span class="nv">$ </span><span class="nb">sudo </span>yum update <span class="nt">-y</span>
</code></pre></div></div> <p>Unde <code class="highlighter-rouge">ocata</code> este ultima versiune de <a href="http://www.openstack.org/">OpenStack</a>.</p> <p>Instalăm ultilitarul care ne va ajuta să facem instalarea de <a href="http://www.openstack.org/">OpenStack</a>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> openstack-packstack
</code></pre></div></div> <h3 id="pasul-iv-instalam-openstack-folosind-packstack">Pasul IV. Instalam OpenStack folosind Packstack</h3> <p>Pentru a configura detaliile instalări <a href="https://www.rdoproject.org/install/quickstart/">Packstack</a> foloseste un fișier care poate fi generat folosind următoarea comandă:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>packstack <span class="nt">--gen-answer-file</span><span class="o">=</span>answer.txt
</code></pre></div></div> <p>Rezultatul comenzi de mai sus este un fișier asemănător cu urmatoarea imagine: <img src="/assets/img/virtualbox/openstack/instalare-openstack-cu-packstack/4-answer-file.png" alt="Setarea unui IP static" /> In acest fișier o să dezactivăm anumite servicii de care nu avem nevoie:</p> <ul> <li><a href="https://wiki.openstack.org/wiki/Cinder">Cinder</a> proiectul care ofera Block Storage <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CONFIG_CINDER_INSTALL<span class="p">=</span><span class="k">n</span>
</code></pre></div> </div> </li> <li><a href="https://wiki.openstack.org/wiki/Swift">Swift</a> proiectul care ofera Object Storage <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CONFIG_SWIFT_INSTALL<span class="p">=</span><span class="k">n</span>
</code></pre></div> </div> </li> <li><a href="https://wiki.openstack.org/wiki/Telemetry#Ceilometer">Ceilometer</a> proiectul care permite colectarea de metrici despre Openstack <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CONFIG_CEILOMETER_INSTALL<span class="p">=</span><span class="k">n</span>
</code></pre></div> </div> </li> <li><a href="https://wiki.openstack.org/wiki/Telemetry#Aodh">Aodh</a> proiectul care ofera setarea de alarme/notificari în OpenStack(se foloseste de <a href="https://wiki.openstack.org/wiki/Telemetry#Ceilometer">Ceilometer</a> pentru a notifica administratorul daca anumite metrici trec de un anumit prag) <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CONFIG_AODH_INSTALL<span class="p">=</span><span class="k">n</span>
</code></pre></div> </div> </li> <li><a href="https://wiki.openstack.org/wiki/Telemetry#Gnocchi">Gnocchi</a> proiectul care permite stocarea de metrici cu o dimensiune foarte mare <div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  CONFIG_GNOCCHI_INSTALL<span class="p">=</span><span class="k">n</span>
</code></pre></div> </div> <p>După personalizarea fișierului de configurare putem porni instalarea folosind comanda:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>packstack <span class="nt">--answer-file</span><span class="o">=</span>answer.txt
</code></pre></div> </div> <p>Acest proces durează aproximativ <strong>30 minute</strong>!</p> </li> </ul> <h3 id="pasul-v-finalizarea-instalării">Pasul V. Finalizarea instalării</h3> <p>După finalizarea instalări putem accesa <a href="https://wiki.openstack.org/wiki/Horizon">Horizon</a> la urmatoarea adresă <code class="highlighter-rouge">localhost:8080</code>. Credențialele pentru userul <code class="highlighter-rouge">admin</code> se află în fișierul <code class="highlighter-rouge">/root/keystonerc_admin</code> în variabila <code class="highlighter-rouge">OS_PASSWORD</code>.</p> <p><img src="/assets/img/virtualbox/openstack/instalare-openstack-cu-packstack/5-horizon.png" alt="Horizon-Dashboard" /></p> </div> </section> </div> </div> <div class="toc-sidebar hidden-xs"> <nav id="toc-nav"> <ul id="toc-menu" class="toc-menu nav nav-stacked" data-spy="affix" data-offset-top="180"> <li><a class="scrollto" href="#resurse-necesare">Resurse necesare</a> <ul class="toc-sub-menu nav nav-stacked"> <li><a class="scrollto" href="#pasul-i-setarea-unui-ip-static">Pasul I. Setarea unui IP static</a> </li> <li><a class="scrollto" href="#pasul-ii-pregatirea-rețelei">Pasul II. Pregatirea rețelei</a> </li> <li><a class="scrollto" href="#pasul-iii-instalarea-pachetului-care-conține-utilitarul-de-instalare-și-a-utilitarului">Pasul III. Instalarea pachetului care conține utilitarul de instalare și a utilitarului</a> </li> <li><a class="scrollto" href="#pasul-iv-instalam-openstack-folosind-packstack">Pasul IV. Instalam OpenStack folosind Packstack</a> </li> <li><a class="scrollto" href="#pasul-v-finalizarea-instalării">Pasul V. Finalizarea instalării</a> </li></ul></li> </ul> </nav> </div> </div> </div> </section> </div> <footer class="footer text-center"> <div class="container-fluid"> <div class="row"> <div class="col-md-2 col-xs-6"> <small class="copyright"> Bazat pe <a href="https://github.com/xriley/PrettyDocs-Theme" target="_blank">PrettyDocs</a>, dezvoltat de <a href="http://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a>. </small> </div> <div class="offset-md-2 col-md-8 col-xs-6"> <small> Ultima actualizare: 1 martie 2019 / <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Conținut licențiat sub termenii Attribution-NonCommercial-ShareAlike 4.0 International">CC</a> <br/><a href="https://teaching.alexcoman.com" title="Spre situl Web al titularului laboratorului Alexandru Coman.">Alexandru Coman</a> </small> </div> </div> </div> </footer> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.2/jquery.matchHeight-min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js"></script> <script src="/assets/js/main.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script> <script>hljs.initHighlightingOnLoad();</script> </body> </html>
